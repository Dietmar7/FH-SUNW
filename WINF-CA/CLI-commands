# 
0) Create config for CA.  X = Group
mkdir WINF-CA-0X
cd WINF-CA-0X
nano openssl-ca.conf

1) Create Keypair/Certificate for own CA
openssl req -x509 -config openssl-ca.conf -days 365 -newkey rsa:4096 -sha256 -out cacert.pem -outform PEM

2) Check certificate of CA
openssl x509 -in cacert.pem -text -noout
openssl x509 -purpose -in cacert.pem -inform PEM

3) Add settings for CA to create certificates - Paste from addon_openssl-ca.conf
nano openssl-ca.conf

touch index.txt
echo '01' > serial.txt


4) Create CSR for webserver
 openssl req -config openssl-server.conf -newkey rsa:2048 -sha256 -nodes -out servercert.csr -outform PEM

5) Verify CSR
openssl req -text -noout -verify -in servercert.csr

6)Sign CSR
openssl ca -config openssl-ca.conf -policy signing_policy -extensions signing_req -out servercert.pem -infiles servercert.csr

7) Verify server certificate
openssl x509 -in servercert.pem -text -noout


8) Apache Webserver Reset - Wiederherstellung Ausgangskonfiguration
sudo rm /etc/apache2/cert/*
sudo rm /etc/apache2/sites-enabled/default-ssl.conf
sudo systemctl restart apache2


9)Kopieren der Zerttifikate von eigener CA
sudo cp servercert.pem /etc/apache2/cert/
sudo cp serverkey.pem /etc/apache2/cert/


10) Anpassen Zertifikate-Konfiguration von Apache

sudo cp /etc/apache2/sites-available/default-ssl.conf /etc/apache2/sites-enabled/
nano /etc/apache2/sites-enabled/default-ssl.conf

    SSLCertificateFile      /etc/apache2/cert/servercert.pem
    SSLCertificateKeyFile /etc/apache2/cert/serverkey.pem


11) Neustart und Kontrolle Apache
sudo systemctl restart apache2
sudo  systemctl status apache2.service













Reference / Source:
https://stackoverflow.com/questions/21297139/how-do-you-sign-a-certificate-signing-request-with-your-certification-authority/21340898#21340898
